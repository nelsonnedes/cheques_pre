<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empresas - Sistema de Gerenciamento de Cheques</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-192x192.png">
</head>
<body>
    <div class="page-container">
        <!-- Sidebar/Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="img/logo.png" alt="Logo" class="logo">
                <h2>Cheques PRE</h2>
            </div>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                <li><a href="novo-cheque.html"><i class="fas fa-plus-circle"></i> Novo Cheque</a></li>
                <li><a href="listar-cheques.html"><i class="fas fa-list"></i> Listar Cheques</a></li>
                <li class="active"><a href="empresas.html"><i class="fas fa-building"></i> Empresas</a></li>
                <li><a href="agenda.html"><i class="fas fa-calendar"></i> Agenda</a></li>
                <li><a href="relatorios.html"><i class="fas fa-file-alt"></i> Relatórios</a></li>
                <li><a href="configuracoes.html"><i class="fas fa-cog"></i> Configurações</a></li>
                <li><a href="perfil.html"><i class="fas fa-user"></i> Perfil</a></li>
                <li><a href="backup.html"><i class="fas fa-database"></i> Backup</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="top-bar">
                <div class="page-title">
                    <h1>Empresas</h1>
                </div>
                <div class="user-info">
                    <span id="userName">Carregando...</span>
                    <button id="logoutBtn" class="btn-logout"><i class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>

            <!-- Form Section -->
            <div class="form-section">
                <div class="section-header">
                    <h2>Nova Empresa</h2>
                    <button id="toggleForm" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Adicionar Empresa
                    </button>
                </div>

                <form id="empresaForm" class="form-grid hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome">Nome da Empresa*</label>
                            <input type="text" id="nome" name="nome" required>
                        </div>
                        <div class="form-group">
                            <label for="cnpj">CNPJ*</label>
                            <input type="text" id="cnpj" name="cnpj" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefone">Telefone</label>
                            <input type="tel" id="telefone" name="telefone">
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" name="email">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="endereco">Endereço</label>
                            <input type="text" id="endereco" name="endereco">
                        </div>
                        <div class="form-group">
                            <label for="cidade">Cidade</label>
                            <input type="text" id="cidade" name="cidade">
                        </div>
                        <div class="form-group">
                            <label for="estado">Estado</label>
                            <select id="estado" name="estado">
                                <option value="">Selecione...</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amapá</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Ceará</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Espírito Santo</option>
                                <option value="GO">Goiás</option>
                                <option value="MA">Maranhão</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Pará</option>
                                <option value="PB">Paraíba</option>
                                <option value="PR">Paraná</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piauí</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rondônia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">São Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="observacoes">Observações</label>
                            <textarea id="observacoes" name="observacoes" rows="3"></textarea>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('empresaForm').reset()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar
                        </button>
                    </div>
                </form>
            </div>

            <!-- List Section -->
            <div class="list-section">
                <div class="section-header">
                    <div class="search-box">
                        <input type="text" id="searchEmpresa" placeholder="Buscar empresa...">
                        <i class="fas fa-search"></i>
                    </div>
                </div>

                <div class="empresas-list" id="empresasList">
                    <!-- Lista de empresas será carregada dinamicamente -->
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando empresas...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Empresa</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm" class="form-grid">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editNome">Nome da Empresa*</label>
                            <input type="text" id="editNome" name="nome" required>
                        </div>
                        <div class="form-group">
                            <label for="editCnpj">CNPJ*</label>
                            <input type="text" id="editCnpj" name="cnpj" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editTelefone">Telefone</label>
                            <input type="tel" id="editTelefone" name="telefone">
                        </div>
                        <div class="form-group">
                            <label for="editEmail">E-mail</label>
                            <input type="email" id="editEmail" name="email">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEndereco">Endereço</label>
                            <input type="text" id="editEndereco" name="endereco">
                        </div>
                        <div class="form-group">
                            <label for="editCidade">Cidade</label>
                            <input type="text" id="editCidade" name="cidade">
                        </div>
                        <div class="form-group">
                            <label for="editEstado">Estado</label>
                            <select id="editEstado" name="estado">
                                <!-- Options serão copiadas do form principal -->
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="editObservacoes">Observações</label>
                            <textarea id="editObservacoes" name="observacoes" rows="3"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary close-modal">Cancelar</button>
                <button class="btn btn-primary" id="saveEdit">Salvar Alterações</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Confirmar Exclusão</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Tem certeza que deseja excluir a empresa <strong id="deleteEmpresaNome"></strong>?</p>
                <p class="warning-text">Esta ação não pode ser desfeita.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary close-modal">Cancelar</button>
                <button class="btn btn-danger" id="confirmDelete">Excluir</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- Scripts -->
    <script src="js/firebase-config.js" type="module"></script>
    <script src="js/empresas.js" type="module"></script>
</body>
</html> 