<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatórios - Sistema de Gerenciamento de Cheques</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="icon" type="image/png" href="img/favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <img src="img/logo.png" alt="Logo" class="logo">
            <h1>GerCheques</h1>
        </div>
        <ul class="nav-links">
            <li>
                <a href="dashboard.html">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li>
                <a href="novo-cheque.html">
                    <i class="fas fa-plus-circle"></i>
                    <span>Novo Cheque</span>
                </a>
            </li>
            <li>
                <a href="listar-cheques.html">
                    <i class="fas fa-list"></i>
                    <span>Listar Cheques</span>
                </a>
            </li>
            <li>
                <a href="empresas.html">
                    <i class="fas fa-building"></i>
                    <span>Empresas</span>
                </a>
            </li>
            <li>
                <a href="agenda.html">
                    <i class="fas fa-calendar"></i>
                    <span>Agenda</span>
                </a>
            </li>
            <li class="active">
                <a href="relatorios.html">
                    <i class="fas fa-chart-bar"></i>
                    <span>Relatórios</span>
                </a>
            </li>
            <li>
                <a href="configuracoes.html">
                    <i class="fas fa-cog"></i>
                    <span>Configurações</span>
                </a>
            </li>
            <li>
                <a href="perfil.html">
                    <i class="fas fa-user"></i>
                    <span>Perfil</span>
                </a>
            </li>
            <li>
                <a href="backup.html">
                    <i class="fas fa-database"></i>
                    <span>Backup</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <h1>Relatórios</h1>
            <div class="user-info">
                <span id="userName">Carregando...</span>
                <button id="logoutBtn" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>

        <!-- Filter Section -->
        <section class="filter-section">
            <div class="filter-panel">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="periodoRelatorio">Período</label>
                        <select id="periodoRelatorio" class="form-control">
                            <option value="7">Últimos 7 dias</option>
                            <option value="30">Últimos 30 dias</option>
                            <option value="90">Últimos 90 dias</option>
                            <option value="180">Últimos 180 dias</option>
                            <option value="365">Último ano</option>
                            <option value="custom">Personalizado</option>
                        </select>
                    </div>
                    <div class="form-group date-range hidden">
                        <label for="dataInicio">Data Início</label>
                        <input type="date" id="dataInicio" class="form-control">
                    </div>
                    <div class="form-group date-range hidden">
                        <label for="dataFim">Data Fim</label>
                        <input type="date" id="dataFim" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="empresaRelatorio">Empresa</label>
                        <select id="empresaRelatorio" class="form-control">
                            <option value="">Todas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="statusRelatorio">Status</label>
                        <select id="statusRelatorio" class="form-control">
                            <option value="">Todos</option>
                            <option value="pendente">Pendente</option>
                            <option value="compensado">Compensado</option>
                            <option value="devolvido">Devolvido</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button id="gerarRelatorio" class="btn-primary">
                            <i class="fas fa-sync"></i>
                            Gerar Relatório
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Summary Section -->
        <section class="summary-section">
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <div class="card-content">
                        <h3>Total de Cheques</h3>
                        <p id="totalCheques">0</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="card-content">
                        <h3>Valor Total</h3>
                        <p id="valorTotal">R$ 0,00</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-content">
                        <h3>Média por Cheque</h3>
                        <p id="mediaValor">R$ 0,00</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="card-content">
                        <h3>Taxa de Compensação</h3>
                        <p id="taxaCompensacao">0%</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="chart-container">
                <h3>Distribuição por Status</h3>
                <canvas id="statusChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Valores por Mês</h3>
                <canvas id="valoresChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Top 5 Empresas</h3>
                <canvas id="empresasChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>Evolução de Cheques</h3>
                <canvas id="evolucaoChart"></canvas>
            </div>
        </section>

        <!-- Table Section -->
        <section class="table-section">
            <div class="table-header">
                <h3>Detalhamento</h3>
                <div class="table-actions">
                    <button id="exportarPDF" class="btn-secondary">
                        <i class="fas fa-file-pdf"></i>
                        Exportar PDF
                    </button>
                    <button id="exportarExcel" class="btn-secondary">
                        <i class="fas fa-file-excel"></i>
                        Exportar Excel
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Número</th>
                            <th>Data</th>
                            <th>Empresa</th>
                            <th>Emissor</th>
                            <th>Valor</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="relatorioTableBody">
                        <!-- Dados serão inseridos via JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <p>Gerando relatório...</p>
        </div>
    </main>

    <!-- Scripts -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/relatorios.js"></script>
</body>
</html> 